#!/bin/bash
set -euo pipefail

# because the environment hook runs in ./hooks/environment, we
# want to ensure that we are building a directory up

# d=${0%/*}
#
d="$(cd "$(dirname "${0}")" && pwd)"
build_dir="$(dirname "$d")"

echo "--- building plugin hooks from ${build_dir}"
go build -C "${build_dir}" -o "$build_dir/hooks/pre-exit"
